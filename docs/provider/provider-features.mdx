---
sidebar_position: 2
slug: /provider-features
title: åŠŸèƒ½
---

# æä¾›å•†åŠŸèƒ½ ğŸ§°

æœ¬é¡µé¢è¯¦ç»†ä»‹ç»äº†Lavaç½‘ç»œä¸­æä¾›çš„å„ç§åŠŸèƒ½ï¼Œä»¥åŠå¦‚ä½•æ“ä½œå®ƒä»¬çš„è¯´æ˜:

- [ğŸ’° Rewards Tracking](#rewards-tracking)
- [âš¡ Caching](#caching)
- [ğŸ”Œ Addons and Extensions](#addonsextensions)
- [ğŸ§Š Freeze and Unfreeze](#freeze)
- [ğŸ” Advanced Auth Configuration](#config-auth)
- [â© `ip-forwarding` Configuration](#config-ip-forwarding)
- [âŒ› `node-timeout` Configuration](#config-node-timeout)
- [âš–ï¸ Load Balancer Configuration](#config-stickyness)
- [ğŸ“ˆ Prometheus Metrics Configuration](#config-prometheus)

--- 

## ğŸ’° å¥–åŠ±è¿½è¸ª{#rewards-tracking}

ä¸€æ—¦æä¾›å•†å¯åŠ¨å¹¶è¿è¡Œï¼Œæ¶ˆè´¹è€…å°†å‘æä¾›å•†è¯·æ±‚ä¸­ç»§æœåŠ¡ã€‚ä¸€æ—¦æä¾›å•†æä¾›æœåŠ¡ï¼Œä»–ä»¬å°†æœ‰èµ„æ ¼ä»ä»–ä»¬æ‰€æœåŠ¡çš„æ¶ˆè´¹è€…é‚£é‡Œè·å¾—å¥–åŠ±ã€‚å½“æ¶ˆè´¹è€…çš„æœˆåº¦è®¡åˆ’åˆ°æœŸæ—¶ï¼Œæä¾›å•†å¯ä»¥è·å¾—å¥–åŠ±ã€‚

æä¾›å•†å¯ä»¥é€šè¿‡ä»¥ä¸‹æŸ¥è¯¢æŸ¥è¯¢æ¥æŸ¥è¯¢ä»–ä»¬å°†æ”¶åˆ°çš„ä¼°è®¡é‡‘é¢ï¼š

```bash
lavad q pairing provider-monthly-payout <lava-provider-address> 
```

å¯é¢†å–çš„å¥–åŠ±å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥è¯¢ï¼š

```bash
lavad q dualstaking delegator-rewards <lava-provider-address>
```

å¹¶ä¸”å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å‘æä¾›å•†ä½™é¢è®¤é¢†ï¼š

```bash
lavad tx dualstaking claim-rewards --from <provider-key>
```

<br />

## âš¡ ç¼“å­˜{#caching}

Lava çš„ç¼“å­˜æœåŠ¡ç”¨äºé™ä½æˆæœ¬å¹¶æé«˜ç½‘ç»œçš„æ•´ä½“æ€§èƒ½ã€‚æä¾›è€…å’Œä½¿ç”¨è€…è¿›ç¨‹éƒ½å—ç›Šäºç¼“å­˜æœåŠ¡ã€‚å¯ç”¨ç¼“å­˜çš„æä¾›ç¨‹åºå¯èƒ½æ¯”æœªå¯ç”¨ç¼“å­˜çš„æä¾›ç¨‹åºæ›´å¿«åœ°è¿”å›å“åº”ã€‚

è¦ä½¿ç”¨ç¼“å­˜æœåŠ¡ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
ListenAddress="127.0.0.1:7777"
ListenMetricsAddress="127.0.0.1:5747"
lavap cache $ListenAddress --metrics_address $ListenMetricsAddress --log_level debug
```

ç¼“å­˜æœåŠ¡å°†åœ¨åå°è¿è¡Œã€‚æ ¹æ®æƒ…å†µå°†ç¼“å­˜æœåŠ¡æ’å…¥æ¶ˆè´¹è€…æˆ–æä¾›è€…è¿›ç¨‹ï¼š

<details> <summary> rpcprovider </summary>

```
lavap rpcprovider <your-regular-cli-options> --cache-be $ListenAddress
```
</details>

<details> <summary> rpcconsumer </summary>

```
lavap rpcconsumer <your-regular-cli-options> --cache-be $ListenAddress
```

</details>

<br/>

## ğŸ”Œ æ’ä»¶å’Œæ‰©å±•{#addonsextensions}

æ’ä»¶å’Œæ‰©å±•æ˜¯é™¤äº†æä¾›ç¨‹åºæœåŠ¡çš„åŸºæœ¬è§„èŒƒä¹‹å¤–è¿˜å¯ä»¥æä¾›çš„æœåŠ¡ã€‚æ’ä»¶æ˜¯é™¤äº†ç°æœ‰ API ä¹‹å¤–å…¬å¼€çš„ APIï¼Œè€Œæ‰©å±•æ˜¯å¯¹ç°æœ‰ API å“åº”çš„æ›´æ”¹ã€‚

ä¸¾å‡ ä¸ªä¾‹å­ï¼š
- `"archive"` - ä¸€ä¸ªæ‰©å±•ï¼Œä¸ºæ¯”åŸºæœ¬è§„èŒƒä¸­å½“å‰ä¿®å‰ªå®šä¹‰æ›´æ—§çš„å—æä¾›æœ‰æ•ˆçš„å“åº”
- `"debug" `- é™¤äº†åŸºæœ¬çš„ RPC è°ƒç”¨ä¹‹å¤–ï¼Œè¿˜æä¾›è°ƒè¯• API çš„æ’ä»¶

### ä¸ºä»€ä¹ˆé€‰æ‹©æ’ä»¶å’Œæ‰©å±•ç¨‹åº â”

æœåŠ¡æ’ä»¶å’Œæ‰©å±•ç¨‹åºæ˜¯ä¸ºæ‚¨çš„ç«¯ç‚¹å¸¦æ¥é¢å¤–æµé‡å’Œæ›´é«˜å¥–åŠ±çš„å¥½æ–¹æ³•ã€‚

#### â›— å…¶ä»–æµé‡

æ¶ˆè´¹è€…æ— éœ€ä»»ä½•å®¢æˆ·ç«¯é…ç½®å³å¯è½»æ¾ä½¿ç”¨æ’ä»¶å’Œæ‰©å±•ç¨‹åºã€‚å®ƒä»¬åŒ…å«åœ¨ä½¿ç”¨è€…è®¢é˜…ä¸­ã€‚Lava åè®®ä¼šè‡ªåŠ¨å°†è¯·æ±‚è·¯ç”±åˆ°æ”¯æŒæ‰€éœ€æœåŠ¡çš„æä¾›å•†ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ”¯æŒç‰¹å®šæ’ä»¶çš„æä¾›å•†çš„æµé‡å¢åŠ ï¼Œè€Œä¸æ”¯æŒçš„æä¾›å•†å°†ä¸ä¼šæ”¶åˆ°æ­¤ç±»è¯·æ±‚ã€‚

#### ğŸ’± æ›´é«˜çš„å¥–åŠ±

æ‰©å±•è¿˜å¯ä»¥åœ¨å¸¸è§„ API ä¸Šæä¾› CU æå‡ï¼Œè¿™æ„å‘³ç€ä¿®æ”¹åçš„è°ƒç”¨å¯èƒ½ä¼šè·å¾—æ›´é«˜çš„å¥–åŠ±ã€‚`"archive"` ä¾‹å¦‚ï¼Œå¯¹äºæ¯ä¸ª API è¯·æ±‚ï¼Œè°ƒç”¨åœ¨ CU ä¸Šéƒ½ä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¹˜æ•°ã€‚åªæœ‰å¯¹ç«¯ç‚¹çš„ `"archive"` API è¯·æ±‚æ‰ä¼šæˆäºˆè¿™äº›é¢å¤–çš„ CUï¼Œå¹¶ä¸” Lava æ ¹æ®æ²»ç†å®šä¹‰çš„å¸¸è§„è§„èŒƒçš„ä¿®å‰ªçŸ¥é“å“ªäº›è°ƒç”¨æ˜¯`"archive"` æˆ–ä¸æ˜¯ã€‚

### è®¾ç½®æ’ä»¶å’Œæ‰©å±•ç¨‹åº âš™ï¸

æ’ä»¶å’Œæ‰©å±•åœ¨æä¾›è€…æœåŠ¡é…ç½®ä¸­é…ç½®ï¼Œç„¶ååœ¨é“¾ä¸Šè´¨æŠ¼ã€‚ğŸ’¡ ä¸ºç®€å•èµ·è§ï¼Œæ’ä»¶å’Œæ‰©å±•éƒ½æ˜¯ä½¿ç”¨è¯¥`addons:`å­—æ®µå®šä¹‰çš„ã€‚æœ‰å…³å‚è€ƒï¼Œè¯·å‚é˜…æ­¤[ç¤ºä¾‹](https://raw.githubusercontent.com/lavanet/lava/main/config/provider_examples/evmos_provider_with_archive.yml)æä¾›ç¨‹åºé…ç½®æ–‡ä»¶ã€‚


#### ğŸ—’ï¸ æ’ä»¶ ï¼ˆé…ç½®æ–‡ä»¶ï¼‰

ä¸ºäº†å°†æ’ä»¶æ·»åŠ åˆ°æœåŠ¡ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ addon å‘½ä»¤é…ç½® yamlï¼š

```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address:
        address: "127.0.0.1:2224"
      node-urls:
        - url: my-eth-node.com/eth-with-debug/ws
          // highlight-start
          addons:
            - debug
          // highlight-end
```

#### ğŸ—’ï¸ æ‰©å±•å ï¼ˆé…ç½®æ–‡ä»¶ï¼‰

ç”±äºæ‰©å±•å¿…é¡»ä¸ºæ¶ˆè´¹è€…æä¾›å¸¸è§„è§„èŒƒåŠŸèƒ½å’Œæ‰©å±•åŠŸèƒ½çš„å¯èƒ½æ€§ï¼Œå› æ­¤ä¸¤è€…éƒ½å¿…é¡»å­˜åœ¨ã€‚

å› æ­¤ï¼Œä¸æ’ä»¶ä¸åŒçš„æ‰©å±•å¿…é¡»åœ¨æ–°çš„ url æ¡ç›®ä¸­é…ç½®ï¼š

```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address:
        address: "127.0.0.1:2224"
      node-urls:
        - url: my-eth-node.com/eth/ws/ # must keep this line
        // highlight-start
        - url: my-eth-node.com/eth-with-archive/ws
          addons:
            - archive
        // highlight-end
```


å°½ç®¡æ­¤é…ç½®ä¸ºæ‚¨æä¾›äº†å¯¹ä¸åŒæ‰©å±•è°ƒç”¨è¿›è¡Œè´Ÿè½½å‡è¡¡çš„æœºä¼šï¼Œä½†å¦‚æœæ‚¨åªè¿è¡Œå•ä¸ªå­˜æ¡£èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¸å¸Œæœ›è‡ªåŠ¨å¯¹å·²ä¿®å‰ªçš„èŠ‚ç‚¹çš„å­˜æ¡£è°ƒç”¨è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œåˆ™å¯ä»¥å°†ä¸¤ä¸ª URL è®¾ç½®ä¸ºæŒ‡å‘å­˜æ¡£èŠ‚ç‚¹ï¼š

```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address:
        address: "127.0.0.1:2224"
      node-urls:
      // highlight-start
        - url: my-eth-node.com/eth-with-archive/ws
        - url: my-eth-node.com/eth-with-archive/ws
          addons:
            - archive
      // highlight-end
```

#### ğŸ—’ï¸ å¤šä¸ªæ‰©å±•åï¼ˆé…ç½®æ–‡ä»¶ï¼‰

å¿…é¡»ä½¿ç”¨æ‰€æœ‰å¯èƒ½çš„ç»„åˆå®šä¹‰å…¶ä»–æ‰©å±•ï¼Œä¾‹å¦‚ï¼Œåˆè§„æ€§ + å­˜æ¡£å°†å¦‚ä¸‹æ‰€ç¤ºï¼š



```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address:
        address: "127.0.0.1:2224"
      node-urls:
        - url: my-eth-node.com/eth/ws/
        // highlight-start
        - url: my-eth-node.com/eth-with-archive/ws
          addons:
            - archive
        - url: my-eth-node.com/eth-with-compliance/ws
          addons:
            - compliance
        - url: my-eth-node.com/eth-with-compliance-and-archive/ws
          addons:
            - compliance
            - archive
        // highlight-end
```

#### ğŸ—’ï¸ ç»„åˆï¼ˆé…ç½®æ–‡ä»¶ï¼‰

æ‰©å±•å’Œæ’ä»¶çš„ç»„åˆå¦‚ä¸‹æ‰€ç¤ºï¼š
```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address:
        address: "127.0.0.1:2224"
      node-urls:
        - url: my-eth-node.com/eth/ws/archive
          addons:
            - archive
        - url: my-eth-node.com/eth-with-debug/ws
          addons:
            - debug
```

#### â›ï¸ è´¨æŠ¼

åœ¨è´¨æŠ¼ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„è¿›ç¨‹æ­£å¸¸è¿è¡Œã€‚å¦‚æœæ’ä»¶æˆ–æ‰©å±•æ— æ³•éªŒè¯ï¼Œåˆ™è¯¥è§„èŒƒå’Œ api æ¥å£çš„æ•´ä¸ªæœåŠ¡å°†å¤±è´¥ã€‚è¯·ä½¿ç”¨è¯¥ lavap test rpcprovider å‘½ä»¤éªŒè¯æ‚¨çš„è®¾ç½®æ˜¯å¦æ­£ç¡®ã€‚

ä½¿ç”¨æ’ä»¶æˆ–æ‰©å±•è¿›è¡Œè´¨æŠ¼ä¸æ™®é€šçš„è´¨æŠ¼å‘½ä»¤éå¸¸ç›¸ä¼¼ã€‚åªéœ€é€šè¿‡æ·»åŠ ä»¥é€—å·åˆ†éš”çš„æ’ä»¶å’Œæ‰©å±•åˆ—è¡¨æ¥ä¿®æ”¹å®ƒï¼š

**è´¨æŠ¼ç¤ºä¾‹ï¼š`stake-provider` âŒ¨ï¸ **

åœ¨ç¾å›½åœ°åŒºçš„ä»¥å¤ªåŠä¸»ç½‘ï¼Œå…·æœ‰å­˜æ¡£å’Œè°ƒè¯•åŠŸèƒ½

```bash
lavap tx pairing stake-provider "ETH1" \
    "50000000000ulava" \
    "provider-host.com:443,USC,archive,debug" USC \
    --from "my_account_name" \
    --provider-moniker "your-moniker" \
    --keyring-backend "test" \
    --chain-id "lava-testnet-2" \
    --gas="auto" \
    --gas-adjustment "1.5" \
    --node "https://public-rpc-testnet2.lavanet.xyz:443/rpc/"
```
è¯·æ³¨æ„ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªç«¯ç‚¹ï¼Œåˆ™éœ€è¦**`ï¼Œarchive,debug`**åœ¨æ”¯æŒå®ƒçš„æ¯ä¸ªç«¯ç‚¹ä¸­æ·»åŠ  ã€‚åœ¨äº‹åŠ¡ä¸­è®¾ç½®è¿™äº›ç»ˆç»“ç‚¹ä¼šæ›¿æ¢ä»»ä½•ç°æœ‰ç»ˆç»“ç‚¹ï¼Œå› æ­¤è¯·ç¡®ä¿æä¾›ç»ˆç»“ç‚¹çš„å®Œæ•´åˆ—è¡¨ã€‚


** è´¨æŠ¼ç¤ºä¾‹ï¼š `modify-provider` âŒ¨ï¸ **

ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹`modify-provider`å‘½ä»¤å°†è¿™äº›æ·»åŠ åˆ°ç°æœ‰æ¡ç›®ä¸­ï¼š


```bash
lavap tx pairing modify-provider "ETH1" --endpoints "provider-host.com:443,USC,archive,debug" --geolocation "USC" ...
```

<br/>

## ğŸ§Š å†»ç»“å’Œè§£å†»{#freeze}

è¯¥**`freeze`**å‘½ä»¤å…è®¸æä¾›è€…å†»ç»“å…¶æœåŠ¡ï¼Œåœ¨ä¸‹ä¸€ä¸ªçºªå…ƒç”Ÿæ•ˆã€‚è¿™ä½¿æä¾›å•†èƒ½å¤Ÿæš‚åœå…¶æœåŠ¡ï¼Œè€Œä¸ä¼šå—åˆ°ä¸è‰¯ QoS è¯„çº§çš„å½±å“ã€‚å†»ç»“æ—¶ï¼Œæä¾›å•†ä¸ä¼šä¸ä½¿ç”¨è€…é…å¯¹ã€‚è¦è§£å†»ï¼Œæä¾›å•†å¿…é¡»ä½¿ç”¨**`unfreeze`**äº¤æ˜“ï¼Œåœ¨ä¸‹ä¸€ä¸ªçºªå…ƒç”Ÿæ•ˆã€‚æ­¤åŠŸèƒ½åœ¨æä¾›å•†éœ€è¦åœ¨ç»´æŠ¤æœŸé—´åœæ­¢å…¶æœåŠ¡ç­‰æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚

### ä½¿ç”¨ ğŸ”¨

#### â„ï¸ å†»ç»“:

```bash
# required flags: --from alice. optional flags: --reason
lavap tx pairing freeze [chain-ids] --from <provider_address>
lavap tx pairing freeze [chain-ids] --from <provider_address> --reason <freeze_reason>
lavap tx pairing freeze ETH1,COS3 --from alice --reason "maintenance"
```

è¯¥**`freeze`**å‘½ä»¤éœ€è¦è¯¥**`--from`**æ ‡å¿—æ¥æŒ‡å®šæä¾›ç¨‹åºåœ°å€ã€‚ï¼ˆå¯é€‰ï¼‰æ‚¨å¯ä»¥æä¾›ä¸€ä¸ª**`--reason`**æ ‡å¿—æ¥è¯´æ˜å†»ç»“çš„åŸå› ã€‚

#### ğŸŒ¡ï¸ è§£å†»ï¼š

```bash
# required flags: --from alice
lavap tx pairing unfreeze [chain-ids] --from <provider_address>
lavap tx pairing unfreeze ETH1,COS3 --from alice
```
è¯¥**`unfreeze`**å‘½ä»¤è¿˜éœ€è¦è¯¥**`--from`**æ ‡å¿—æ¥æŒ‡å®šæä¾›ç¨‹åºåœ°å€ã€‚


<br />

## ğŸ” é«˜çº§èº«ä»½éªŒè¯é…ç½® {#config-auth}
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå‡è®¾èŠ‚ç‚¹ URL èƒ½å¤Ÿå¤„ç†æ­¤èº«ä»½éªŒè¯ï¼Œåˆ™ COS3 tendermint URL ä½¿ç”¨å®¢æˆ·ç«¯èº«ä»½éªŒè¯ã€‚

### ä½¿ç”¨ HTTP æ ‡å¤´è¿›è¡Œèº«ä»½éªŒè¯ ğŸ”‘ {#auth-headers}

ä»¥ä¸‹ RPCProvider é…ç½®ç¤ºä¾‹æ¼”ç¤ºäº†ä½¿ç”¨â€œauth-headersâ€é€‰é¡¹è¿›è¡Œèº«ä»½éªŒè¯ï¼š


```yaml
endpoints:
  - api-interface: tendermintrpc
    chain-id: COS3
    network-address: 
     address: 127.0.0.1:2221
    node-urls:
      - url: ws://127.0.0.1:26657/websocket
        auth-config:
          auth-headers:
            WANTED_HEADER_NAME_1: xyz
      - url: http://127.0.0.1:26657
        auth-config:
        // highlight-start
          auth-headers:strings.Join(goodChains, "; ")
            Authorization: 'Bearer xxyyzz'
        // highlight-end
```

### ä½¿ç”¨æŸ¥è¯¢å‚æ•°è¿›è¡Œèº«ä»½éªŒè¯ ğŸ”‘ {#auth-query}

ä»¥ä¸‹ RPCProvider é…ç½®ç¤ºä¾‹æ¼”ç¤ºäº†ä½¿ç”¨â€œauth-queryâ€é€‰é¡¹è¿›è¡Œèº«ä»½éªŒè¯ï¼š

```yaml
endpoints:
    - api-interface: tendermintrpc
      chain-id: COS3
      network-address: 
        address: 127.0.0.1:2221
      node-urls:
        - url: ws://127.0.0.1:26657/websocket
          // highlight-start
          auth-config:
            auth-query: auth=xxyyzz
          // highlight-end
        - url: http://127.0.0.1:26657
          auth-config:
            auth-query: auth=xyz
```

### gRPC TLS é…ç½® ğŸ”‘ {#grpc-tls}

å¦‚æœè¦å°† TLS èº«ä»½éªŒè¯æ·»åŠ åˆ° gRPC ç«¯ç‚¹ï¼Œåˆ™æœ‰ 3 ä¸ªé€‰é¡¹ï¼š

#### 1. åŠ¨æ€è¯ä¹¦

```yaml
endpoints:
    - api-interface: grpc
      chain-id: LAV1
      network-address: 
        address: 127.0.0.1:2221
      node-urls:
        - url: 127.0.0.1:9090
          // highlight-start
          auth-config:
            use-tls: true 
          // highlight-end
```

#### 2. æä¾›è¯ä¹¦å’Œå¯†é’¥ï¼š

```yaml
endpoints:
    - api-interface: grpc
      chain-id: LAV1
      network-address: 
        address: 127.0.0.1:2221
      node-urls:
        - url: 127.0.0.1:9090
          // highlight-start
          auth-config:
            use-tls: true
            key-pem: /home/user/key.pem
            cert-pem: /home/user/cert.pem
          // highlight-end
```

#### 3. æä¾›æ ¹è¯ä¹¦ï¼š

```yaml
endpoints:
    - api-interface: grpc
      chain-id: LAV1
      network-address: 
        address: 127.0.0.1:2221
      node-urls:
        - url: 127.0.0.1:9090
          // highlight-start
          auth-config:
            use-tls: true
            cacert-pem: /home/user/cert.pem 
          // highlight-end
```

<br />

## â© `ip-forwarding` é…ç½® {#config-ip-forwarding}

å¦‚æœè¦è¿›è¡Œ IP è´Ÿè½½å‡è¡¡/é™åˆ¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ ï¼š`ip-forwarding: true`ã€‚
 å°†è¯¥ IP æ·»åŠ åˆ°ä»¥ä¸‹æ ‡å¤´ï¼š `X-Forwarded-For`ã€‚

```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address: 
        address: 127.0.0.1:2221
      node-urls: 
        - url: ws://your_node_url/
          // highlight-start
          ip-forwarding: true
          // highlight-end
```

<br />

## âŒ› `node-timeout` é…ç½® {#config-node-timeout}

:::caution
è¦†ç›–è¶…æ—¶æ—¶é—´å¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨è€…çš„ QoS è¾ƒå·®ã€‚
:::
å¦‚æœæ‚¨çš„èŠ‚ç‚¹ç¦»`rpcprovider`å¤ªè¿œæˆ–å“åº”é€Ÿåº¦å¤ªæ…¢ï¼Œå¹¶ä¸”æ‚¨ä»ç„¶å¸Œæœ›æä¾›å•†ç¨‹åºè¿›ç¨‹åœ¨ä¸è¿›è¡Œæ•…éšœæ’é™¤çš„æƒ…å†µä¸‹å¯åŠ¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ node-urls é…ç½®ä¸­çš„æ ‡å¿—ä½¿ç”¨è‡ªå®šä¹‰å€¼è¦†ç›–è¶…æ—¶ï¼š

```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address: 
        address: 127.0.0.1:2221
      node-urls: 
        - url: ws://your_node_url/
          // highlight-start
          timeout: 1s
          // highlight-end
```
<br />

## âš–ï¸ è´Ÿè½½å‡è¡¡å™¨é…ç½® {#config-stickyness}

ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨è¿è¡Œå¤šä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªè®¾ç½®ï¼š
1. **åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ªæä¾›è€…** - å¦‚æœåœ¨æä¾›è€…è¿›ç¨‹ä¹‹å‰è´Ÿè½½å‡è¡¡ gRPCï¼Œå¹¶åœ¨æ¯ä¸ªèŠ‚ç‚¹æœºå™¨ä¸Šè¿è¡Œä¸€ä¸ªæä¾›è€…æœåŠ¡ï¼ˆè·ç¦»è¾ƒè¿‘ï¼‰ï¼Œé‚£ä¹ˆæä¾›è€…è¿›ç¨‹å¯ä»¥å…±å­˜ã€‚
2. **è¿è¡Œä¸€ä¸ªæä¾›è€…æœåŠ¡å¹¶å¯¹èŠ‚ç‚¹è¿›è¡Œè´Ÿè½½å‡è¡¡ **- åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½ç”±ä¸€ä¸ªæä¾›è€…æœåŠ¡ä½¿ç”¨ï¼Œè¿™ç§è®¾ç½®æ›´æœ‰å¯èƒ½è§¦å‘æä¾›è€…æœåŠ¡å’ŒèŠ‚ç‚¹ä¹‹é—´çš„ä¸€è‡´æ€§é—®é¢˜ã€‚

### ä¸ºè´Ÿè½½å‡è¡¡èŠ‚ç‚¹è®¾ç½®stickynessæ”¯æŒ ğŸ¯

å¦‚æœæ‚¨è®¾ç½®äº†ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œå³æ¯ä¸ªå¤šä¸ªèŠ‚ç‚¹ä¸€ä¸ªæä¾›è€…æœåŠ¡ï¼Œåˆ™éœ€è¦é€šè¿‡ä¸€ä¸ªæ ‡å¤´åœ¨èŠ‚ç‚¹ä¹‹é—´æä¾›stickynessã€‚åŸå› æ˜¯æä¾›è€…ç­¾ç½²çš„åŠ å¯†è¯æ˜å¿…é¡»ä¸€è‡´ï¼Œä¸èƒ½è®©åŒºå—çš„è¿›åº¦å€’é€€ã€‚

ä¸ºäº†æ”¯æŒstickynessæ ‡å¤´ï¼ŒLava é»˜è®¤æ·»åŠ äº†ä¸€ä¸ªåä¸º `X-Node-Sticky` çš„æ ‡å¤´ï¼Œè¯¥æ ‡å¤´æ·»åŠ äº†ä¸€ä¸ªç”±å¤šä¸ªå› ç´ ç»„æˆä¸”å¯¹æ¯ä¸ªæ¶ˆè´¹è€…ä½¿ç”¨å”¯ä¸€çš„æ¶ˆè´¹è€…ä»¤ç‰Œã€‚

### æ›´æ”¹Stickynessæ ‡å¤´ ğŸ”€

ä¸ºäº†æ”¯æŒç°æœ‰çš„è´Ÿè½½å‡è¡¡å™¨é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨é…ç½®ä¸­çš„é…ç½®æ¥æ›´æ”¹æ ‡å¤´åç§°ï¼š
```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address: 
        address: 127.0.0.1:2221
      node-urls: 
        - url: ws://your_node_url/
// highlight-start
sticky-header: <your-sticky-header-name>
// highlight-end
```

<br />

## ğŸ“ˆ Prometheus æŒ‡æ ‡é…ç½® {#config-prometheus}

æ·»åŠ å¯¹ prometheus çš„æ”¯æŒæ˜¯ä¸€ä¸ªç®€å•çš„æ›´æ”¹ã€‚è®¾ç½®ä»¥ä¸‹å†…å®¹`metrics-listening-address:`ã€‚è¯·æ³¨æ„ï¼Œæ‰€æœ‰ Lava åˆ†æéƒ½ä»¥`lava_`å¼€å¤´ã€‚æ›´æ”¹ä»¥ä¸‹é…ç½®ï¼š


```yaml
endpoints:
    - api-interface: jsonrpc
      chain-id: ETH1
      network-address: 
        address: 127.0.0.1:2221
      node-urls: 
        - url: ws://your_node_url/
// highlight-start
metrics-listen-address: ":7780"
// highlight-end
```
